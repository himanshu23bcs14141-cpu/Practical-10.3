<!DOCTYPE html><html><body>
<h2>Social Media Mini App</h2>

<h3>Register</h3>
<input id="regUser" placeholder="Username"><input id="regPass" placeholder="Password">
<button onclick="register()">Register</button>

<h3>Login</h3>
<input id="logUser" placeholder="Username"><input id="logPass" placeholder="Password">
<button onclick="login()">Login</button>

<h3>Post</h3>
<input id="text" placeholder="Write something...">
<button onclick="post()">Post</button>

<h3>Feed</h3><button onclick="load()">Load Posts</button>
<ul id="feed"></ul>

<script>
let token = "";

async function register(){
  await fetch("http://localhost:5000/register",{
    method:"POST",headers:{'Content-Type':"application/json"},
    body:JSON.stringify({username:regUser.value,password:regPass.value})
  }); alert("Registered!");
}

async function login(){
  const r = await fetch("http://localhost:5000/login",{
    method:"POST",headers:{'Content-Type':"application/json"},
    body:JSON.stringify({username:logUser.value,password:logPass.value})
  });
  const d = await r.json(); token = d.token; alert("Logged in!");
}

async function post(){
  await fetch("http://localhost:5000/posts",{
    method:"POST",
    headers:{'Content-Type':"application/json","Authorization":"Bearer "+token},
    body:JSON.stringify({text:text.value})
  }); alert("Posted!");
}

async function load(){
  const r = await fetch("http://localhost:5000/posts");
  const d = await r.json();
  feed.innerHTML = d.map(p=>`<li>${p.text}</li>`).join("");
}
</script>
</body></html>
